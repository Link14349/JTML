{"version":3,"sources":["../src/index.js"],"names":["JTML","global","globalThis","DOMAIN","$","compileNow","compiler","each","tag","cb","tags","children","i","length","$compiler","fun","name","hide","recursion","$compilerDefine","attr","val","$ignoreDict","$ignore","tagName","compile","domain","compileSelf","tmp","localName","tagJq","css","document","ready","jtml"],"mappings":";;AAAA;;;;;;;;;;AAUA,IAAMA,OAAO,EAAb;AACA,IAAMC,SAASC,UAAf;;AAEA,CAAC,UAAUF,IAAV,EAAgB;AACbA,SAAKG,MAAL,GAAcC,EAAE,IAAF,CAAd;AACAJ,SAAKK,UAAL,GAAkB,IAAlB;AACAL,SAAKM,QAAL,GAAgB,EAAhB;;AAEAN,SAAKO,IAAL,GAAY,UAAUC,GAAV,EAAeC,EAAf,EAAmB;AAC3B,YAAIC,OAAOF,IAAIG,QAAJ,EAAX;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,KAAKG,MAAzB,EAAiCD,GAAjC,EAAsC;AAClC,gBAAI,CAACH,GAAGC,KAAKE,CAAL,CAAH,CAAL,EAAkBZ,KAAKO,IAAL,CAAUH,EAAEM,KAAKE,CAAL,CAAF,CAAV,EAAsBH,EAAtB;AACrB;AACJ,KALD;;AAOAT,SAAKM,QAAL,CAAcQ,SAAd,GAA0B,UAAUC,GAAV,EAA+D;AAAA,YAAhDC,IAAgD,uEAAzCD,IAAIC,IAAqC;AAAA,YAA/BC,IAA+B,uEAAxB,IAAwB;AAAA,YAAlBC,SAAkB,uEAAN,IAAM;;AACrFlB,aAAKM,QAAL,CAAcU,IAAd,IAAsBD,GAAtB;AACAf,aAAKM,QAAL,CAAcU,IAAd,EAAoBC,IAApB,GAA2BA,IAA3B;AACAjB,aAAKM,QAAL,CAAcU,IAAd,EAAoBE,SAApB,GAAgCA,SAAhC;AACH,KAJD;AAKAlB,SAAKM,QAAL,CAAca,eAAd,GAAgC,UAAUH,IAAV,EAAgBI,IAAhB,EAAsBC,GAAtB,EAA2B;AACvDrB,aAAKM,QAAL,CAAcU,IAAd,EAAoBI,IAApB,IAA4BC,GAA5B;AACH,KAFD;AAGArB,SAAKM,QAAL,CAAcgB,WAAd,GAA4B,EAA5B;AACAtB,SAAKM,QAAL,CAAciB,OAAd,GAAwB,UAAUC,OAAV,EAAmB;AACvCxB,aAAKM,QAAL,CAAcgB,WAAd,CAA0BE,OAA1B,IAAqC,IAArC;AACH,KAFD;;AAIAxB,SAAKyB,OAAL,GAAe,YAAqD;AAAA,YAA3CC,MAA2C,uEAAlC1B,KAAKG,MAA6B;AAAA,YAArBwB,WAAqB,uEAAP,KAAO;;AAChE,iBAASC,GAAT,CAAapB,GAAb,EAAkB;AACd,gBAAIF,WAAWN,KAAKM,QAAL,CAAcE,IAAIqB,SAAlB,CAAf;AACA,gBAAIvB,QAAJ,EAAc;AAAC;AACX,oBAAIwB,QAAQ1B,EAAEI,GAAF,CAAZ;AACA,oBAAIF,SAASW,IAAb,EAAmBa,MAAMC,GAAN,CAAU,SAAV,EAAqB,MAArB;AACnBzB,yBAASwB,KAAT;AACA,uBAAOxB,SAASY,SAAhB;AACH;AACJ;AACD,YAAIS,WAAJ,EAAiB;AACbC,gBAAIF,OAAO,CAAP,CAAJ;AACA1B,iBAAKO,IAAL,CAAUmB,MAAV,EAAkBE,GAAlB;AACH,SAHD,MAGO;AACH5B,iBAAKO,IAAL,CAAUmB,MAAV,EAAkBE,GAAlB;AACH;AACJ,KAhBD;AAiBH,CA1CA,CA0CC5B,IA1CD,CAAD;;AA4CAI,EAAE4B,QAAF,EAAYC,KAAZ,CAAkB,YAAY;AAC1BjC,SAAKG,MAAL,GAAcC,EAAE,YAAF,CAAd;;AAEA,QAAIJ,KAAKK,UAAT,EAAqBL,KAAKyB,OAAL,GAHK,CAGU;;AAEpC;AACA,QAAIS,OAAO9B,EAAE,MAAF,CAAX;AACA,SAAK,IAAIQ,IAAI,CAAb,EAAgBA,IAAIsB,KAAKrB,MAAzB,EAAiCD,GAAjC,EAAsC;AAClCZ,aAAKyB,OAAL,CAAarB,EAAE8B,KAAKtB,CAAL,CAAF,CAAb;AACH;AACJ,CAVD","file":"index.js","sourcesContent":["/*!\n\n * JTML Library\n\n * yhzheng - v0.0.1\n\n * https://github.com/qianduanXIAOHAOZI/JTML | Released under MIT license\n\n */\n\nconst JTML = {};\nconst global = globalThis;\n\n!function (JTML) {\n    JTML.DOMAIN = $(null);\n    JTML.compileNow = true;\n    JTML.compiler = {};\n\n    JTML.each = function (tag, cb) {\n        let tags = tag.children();\n        for (let i = 0; i < tags.length; i++) {\n            if (!cb(tags[i])) JTML.each($(tags[i]), cb);\n        }\n    };\n\n    JTML.compiler.$compiler = function (fun, name = fun.name, hide = true, recursion = true) {\n        JTML.compiler[name] = fun;\n        JTML.compiler[name].hide = hide;\n        JTML.compiler[name].recursion = recursion;\n    };\n    JTML.compiler.$compilerDefine = function (name, attr, val) {\n        JTML.compiler[name][attr] = val;\n    };\n    JTML.compiler.$ignoreDict = {};\n    JTML.compiler.$ignore = function (tagName) {\n        JTML.compiler.$ignoreDict[tagName] = true;\n    };\n\n    JTML.compile = function (domain = JTML.DOMAIN, compileSelf = false) {\n        function tmp(tag) {\n            let compiler = JTML.compiler[tag.localName];\n            if (compiler) {// 存在这个jtml转义器\n                let tagJq = $(tag);\n                if (compiler.hide) tagJq.css(\"display\", \"none\");\n                compiler(tagJq);\n                return compiler.recursion;\n            }\n        }\n        if (compileSelf) {\n            tmp(domain[0]);\n            JTML.each(domain, tmp);\n        } else {\n            JTML.each(domain, tmp);\n        }\n    };\n}(JTML);\n\n$(document).ready(function () {\n    JTML.DOMAIN = $(\"body:first\");\n\n    if (JTML.compileNow) JTML.compile();// 编译domain内容\n\n    // 编译所有jtml标签包裹的内容\n    let jtml = $(\"jtml\");\n    for (let i = 0; i < jtml.length; i++) {\n        JTML.compile($(jtml[i]));\n    }\n});"]}