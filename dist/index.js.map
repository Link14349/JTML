{"version":3,"sources":["../src/index.js"],"names":["JTML","global","globalThis","DOMAIN","$","compileNow","compiler","each","tag","cb","tags","children","i","length","$compiler","fun","name","hide","recursion","compile","domain","localName","tagJq","css","document","ready","jtml"],"mappings":";;AAAA;;;;;;;;;;AAUA,IAAMA,OAAO,EAAb;AACA,IAAMC,SAASC,UAAf;;AAEA,CAAC,UAAUF,IAAV,EAAgB;AACbA,SAAKG,MAAL,GAAcC,EAAE,IAAF,CAAd;AACAJ,SAAKK,UAAL,GAAkB,IAAlB;AACAL,SAAKM,QAAL,GAAgB,EAAhB;;AAEAN,SAAKO,IAAL,GAAY,UAAUC,GAAV,EAAeC,EAAf,EAAmB;AAC3B,YAAIC,OAAOF,IAAIG,QAAJ,EAAX;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,KAAKG,MAAzB,EAAiCD,GAAjC,EAAsC;AAClC,gBAAI,CAACH,GAAGC,KAAKE,CAAL,CAAH,CAAL,EAAkBZ,KAAKO,IAAL,CAAUH,EAAEM,KAAKE,CAAL,CAAF,CAAV,EAAsBH,EAAtB;AACrB;AACJ,KALD;;AAOAT,SAAKM,QAAL,CAAcQ,SAAd,GAA0B,UAAUC,GAAV,EAA+D;AAAA,YAAhDC,IAAgD,uEAAzCD,IAAIC,IAAqC;AAAA,YAA/BC,IAA+B,uEAAxB,IAAwB;AAAA,YAAlBC,SAAkB,uEAAN,IAAM;;AACrFlB,aAAKM,QAAL,CAAcU,IAAd,IAAsBD,GAAtB;AACAf,aAAKM,QAAL,CAAcU,IAAd,EAAoBC,IAApB,GAA2BA,IAA3B;AACAjB,aAAKM,QAAL,CAAcU,IAAd,EAAoBE,SAApB,GAAgCA,SAAhC;AACH,KAJD;;AAMAlB,SAAKmB,OAAL,GAAe,YAAgC;AAAA,YAAtBC,MAAsB,uEAAbpB,KAAKG,MAAQ;;AAC3CH,aAAKO,IAAL,CAAUa,MAAV,EAAkB,UAAUZ,GAAV,EAAe;AAC7B,gBAAIF,WAAWN,KAAKM,QAAL,CAAcE,IAAIa,SAAlB,CAAf;AACA,gBAAIf,QAAJ,EAAc;AAAC;AACX,oBAAIgB,QAAQlB,EAAEI,GAAF,CAAZ;AACA,oBAAIF,SAASW,IAAb,EAAmBK,MAAMC,GAAN,CAAU,SAAV,EAAqB,MAArB;AACnBjB,yBAASgB,KAAT;AACA,uBAAOhB,SAASY,SAAhB;AACH;AACJ,SARD;AASH,KAVD;AAWH,CA7BA,CA6BClB,IA7BD,CAAD;;AA+BAI,EAAEoB,QAAF,EAAYC,KAAZ,CAAkB,YAAY;AAC1BzB,SAAKG,MAAL,GAAcC,EAAE,YAAF,CAAd;;AAEA,QAAIJ,KAAKK,UAAT,EAAqBL,KAAKmB,OAAL,GAHK,CAGU;;AAEpC;AACA,QAAIO,OAAOtB,EAAE,MAAF,CAAX;AACA,SAAK,IAAIQ,IAAI,CAAb,EAAgBA,IAAIc,KAAKb,MAAzB,EAAiCD,GAAjC,EAAsC;AAClCZ,aAAKmB,OAAL,CAAaf,EAAEsB,KAAKd,CAAL,CAAF,CAAb;AACH;AACJ,CAVD","file":"index.js","sourcesContent":["/*!\n\n * JTML Library\n\n * yhzheng - v0.0.1\n\n * https://github.com/qianduanXIAOHAOZI/JTML | Released under MIT license\n\n */\n\nconst JTML = {};\nconst global = globalThis;\n\n!function (JTML) {\n    JTML.DOMAIN = $(null);\n    JTML.compileNow = true;\n    JTML.compiler = {};\n\n    JTML.each = function (tag, cb) {\n        let tags = tag.children();\n        for (let i = 0; i < tags.length; i++) {\n            if (!cb(tags[i])) JTML.each($(tags[i]), cb);\n        }\n    };\n\n    JTML.compiler.$compiler = function (fun, name = fun.name, hide = true, recursion = true) {\n        JTML.compiler[name] = fun;\n        JTML.compiler[name].hide = hide;\n        JTML.compiler[name].recursion = recursion;\n    };\n\n    JTML.compile = function (domain = JTML.DOMAIN) {\n        JTML.each(domain, function (tag) {\n            let compiler = JTML.compiler[tag.localName];\n            if (compiler) {// 存在这个jtml转义器\n                let tagJq = $(tag);\n                if (compiler.hide) tagJq.css(\"display\", \"none\");\n                compiler(tagJq);\n                return compiler.recursion;\n            }\n        });\n    };\n}(JTML);\n\n$(document).ready(function () {\n    JTML.DOMAIN = $(\"body:first\");\n\n    if (JTML.compileNow) JTML.compile();// 编译domain内容\n\n    // 编译所有jtml标签包裹的内容\n    let jtml = $(\"jtml\");\n    for (let i = 0; i < jtml.length; i++) {\n        JTML.compile($(jtml[i]));\n    }\n});"]}